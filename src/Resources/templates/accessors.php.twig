{% extends 'base.php.twig' %}

{% macro render_getter(prop, accessor) %}
        // property '{{ prop.name }}'
        if (null !== $value = $object->{{ attribute(prop, accessor) }}()) {
            {% spaceless %}
            {% if prop.readValueFilter is not null %}
                $data['{{ prop.exposeAs }}'] = {{ prop.readValueFilter|raw }};
            {% elseif prop.type in ['integer', 'string', 'float', 'boolean', 'array'] %}
                $data['{{ prop.exposeAs }}'] = ({{ prop.type }}) $value;
            {% else %}
                $data['{{ prop.exposeAs }}'] = $this->serializer->normalize($value, $context);
            {% endif %}
            {% endspaceless %}

        } elseif ($shouldSerializeNull) {
            $data['{{ prop.exposeAs }}'] = null;
        }
{% endmacro %}

{% macro render_setter(prop) %}
        // property '{{ prop.name }}'
        if (isset($data['{{ prop.exposeAs }}'])) {
            if (null !== $value = $data['{{ prop.exposeAs }}']) {
                {% spaceless %}
                {% if prop.writeValueFilter is not null %}
                    $object->{{ prop.setter }}({{ prop.writeValueFilter|raw }});
                {% elseif prop.type in ['integer', 'string', 'float', 'boolean', 'array'] %}
                    $object->{{ prop.setter }}(({{ prop.type }}) $value);
                {% else %}
                    $object->{{ prop.setter }}($this->serializer->denormalize($value, '{{ prop.type|raw }}', $context));
                {% endif %}
                {% endspaceless %}

            } else {
                $object->{{ prop.setter }}(null);
            }
        }
{% endmacro %}

{% import _self as helper %}

{% block property_getters %}
{{ helper.render_getter(prop, 'getter') }}
{% endblock %}

{% block virtual_property_getters %}
{{ helper.render_getter(prop, 'name') }}
{% endblock %}

{% block property_setters %}
{{ helper.render_setter(prop) }}
{% endblock %}
